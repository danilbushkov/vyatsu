
\newpage

\section{Разработка структуры приложения}

На данном этапе работы необходимо в соответствие с требованиями,
поставленными в техническом задании, разработать структуру конструктора
и описать основные алгоритмы функционирования.

\subsection{Разработка общей структуры конструктора }

Общая структура конструктора представлена на рисунке~\ref{f:general-struct}.

\begin{figure}[ht]
	\centering
	\includegraphics[width=0.95\textwidth]{general-struct}
	\caption{Общая структура конструктора}
	\label{f:general-struct}
\end{figure}


Конструктор состоит из серверной и клиентской части.

Серверная часть состоит из нескольких сервисов:
\begin{itemize}
	\item сервис пользователей;
	\item сервис ботов;
	\item сервис, обслуживающий ботов.
\end{itemize}

Сервис пользователей взаимодействует с хранилищами в виде базы
данных и кэша, в которых хранятся пользователи конструктора и их токены
авторизации. Через него происходит регистрация и аутентификация
пользователей.

Сервис ботов предоставляет программный интерфейс для работы с
ботами. Данный сервис выполняет следующие функции:
\begin{itemize}
	\item создание ботов;
	\item редактирование ботов;
	\item удаление ботов;
	\item запуск и остановка ботов.
\end{itemize}

Данные ботов сохраняются в базе данных. Авторизация пользователя
происходит с помощью данных из кэша пользователей.

Сервис, обслуживающий ботов, обрабатывает запросы от запущенных
Telegram ботов, также он получает и выполняет команды на запуск и
остановку ботов от сервиса ботов, команды при этом посылаются через сервер
обмена сообщениями. Данный сервис сохраняет и получает текущее состояние
пользователя из кэша.

Пользователь взаимодействует с конструктором через веб-интерфейс,
который через прокси-сервер связан с сервисами пользователей и ботов.
Веб-интерфейс является клиентской частью конструктора.

\input{pages/content/struct/server}
\input{pages/content/struct/client}


